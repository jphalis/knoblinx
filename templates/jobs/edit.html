{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}KnobLinx / Edit Job{% endblock title %}

{% block stylesheets %}
    <link href="{% static 'vendors/bootstrap-daterangepicker/datetimepicker.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendors/bootstrap-wysiwyg/css/core-b3.css' %}" rel="stylesheet" />
    <link href="{% static 'vendors/iCheck/skins/flat/green.css' %}" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}
    <div class="right_col" role="main">
        <div class="">
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">
                        <div class="x_content">
                            <form class="form-horizontal form-label-left" action="." method="POST" role="form">
                                {% csrf_token %}
                                <span class="section">Edit {{ form.title.value }}</span>
                                <div class="item form-group {% if form.title.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.title.auto_id }}">
                                        {{ form.title.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        {{ form.title }}
                                        {{ form.title.errors }}
                                    </div>
                                </div>
                                <div class="item form-group {% if form.location.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.location.auto_id }}">
                                        {{ form.location.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        {{ form.location }}
                                        {{ form.location.errors }}
                                    </div>
                                </div>
                                <div class="item form-group {% if form.contact_email.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.contact_email.auto_id }}">
                                        {{ form.contact_email.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        {{ form.contact_email }}
                                        {{ form.contact_email.errors }}
                                    </div>
                                </div>
                                <div class="item form-group {% if form.min_gpa.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.min_gpa.auto_id }}">
                                        {{ form.min_gpa.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        {{ form.min_gpa }}
                                        {{ form.min_gpa.errors }}
                                    </div>
                                </div>
                                <br>
                                <div class="item form-group {% if form.universities.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.universities.auto_id }}">
                                        {{ form.universities.label }}
                                    </label>
                                    <div class="col-md-10 col-sm-10 col-xs-12" style="height:150px; overflow:auto;">
                                        {% for choice in form.universities.field.choices %}
                                            <input type="checkbox" name="universities" value="{{ choice.0 }}" class="flat" {% if choice.0|stringformat:"i" in job.get_universities_pk %}checked{% endif %} />
                                            {{ choice.1 }}
                                            <br>
                                        {% endfor %}
                                    </div>
                                    <div class="control-label col-md-2 col-sm-2 col-xs-12"></div>
                                    <div class="col-md-10 col-sm-10 col-xs-12">
                                        {{ form.universities.errors }}
                                    </div>
                                </div>
                                <br>
                                <div class="item form-group {% if form.years.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.years.auto_id }}">
                                        {{ form.years.label }}
                                    </label>
                                    <div class="col-md-10 col-sm-10 col-xs-12" style="overflow:auto;">
                                        {% for choice in form.years.field.choices %}
                                            <input type="checkbox" name="years" value="{{ choice.0 }}" class="flat" {% if choice.0|stringformat:"i" in job.years %}checked{% endif %} />
                                            {{ choice.1 }}
                                            <br>
                                        {% endfor %}
                                        {{ form.years.errors }}
                                    </div>
                                </div>
                                <br>
                                <div class="item form-group {% if form.degrees.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.degrees.auto_id }}">
                                        {{ form.degrees.label }}
                                    </label>
                                    <div class="col-md-10 col-sm-10 col-xs-12" style="height:150px; overflow:auto;">
                                        {% for choice in form.degrees.field.choices %}
                                            <input type="checkbox" name="degrees" value="{{ choice.0 }}" class="flat" {% if choice.0|stringformat:"i" in job.get_degrees_pk %}checked{% endif %} />
                                            {{ choice.1 }}
                                            <br>
                                        {% endfor %}
                                    </div>
                                    <div class="control-label col-md-2 col-sm-2 col-xs-12"></div>
                                    <div class="col-md-10 col-sm-10 col-xs-12">
                                        {{ form.degrees.errors }}
                                    </div>
                                </div>
                                <br>
                                <div class="item form-group {% if form.list_date_start.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.list_date_start.auto_id }}">
                                        {{ form.list_date_start.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <div class='input-group date'>
                                            {{ form.list_date_start }}
                                            <span class="input-group-addon">
                                                <span class="fa fa-calendar"></span>
                                            </span>
                                        </div>
                                        {{ form.list_date_start.errors }}
                                    </div>
                                </div>
                                <div class="item form-group {% if form.list_date_end.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.list_date_end.auto_id }}">
                                        {{ form.list_date_end.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <div class='input-group date'>
                                            {{ form.list_date_end }}
                                            <span class="input-group-addon">
                                                <span class="fa fa-calendar"></span>
                                            </span>
                                        </div>
                                        {{ form.list_date_end.errors }}
                                    </div>
                                </div>
                                <div class="item form-group {% if form.description.errors %}has-error{% endif %}">
                                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.description.auto_id }}">
                                        {{ form.description.label }}
                                    </label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <div class="panel panel-danger">
                                            <div class="panel-body">{{ form.description }}</div>
                                        </div>
                                        {{ form.description.errors }}
                                    </div>
                                </div>
                                <div class="ln_solid"></div>
                                <button id="submitButton" type="submit" class="btn btn-block btn-primary active">
                                    Update Job
                                </button>
                            </form>
                        </div>
                    </div>
                 </div>
            </div>
            <br>
            <br>
        </div>
    </div>
{% endblock content %}

{% block js %}
    <script src="{% static 'vendors/iCheck/icheck.min.js' %}"></script>
    <script src="{% static 'custom/js/moment.min.js' %}"></script>
    <script src="{% static 'vendors/bootstrap-daterangepicker/datetimepicker.min.js' %}"></script>
    <script src="{% static 'vendors/bootstrap-wysiwyg/js/wysihtml5.js' %}" type="text/javascript"></script>
    <script src="{% static 'vendors/bootstrap-wysiwyg/js/core-b3.js' %}" type="text/javascript"></script>
{% endblock js %}

{% block scripts %}
    <script type="text/javascript">
        $(document).ready(function() {
            // Toggle form submit content when clicked
            var submitButton = $('#submitButton');

            submitButton.on('click', function() {
                // disable the button to prevent multiple submissions
                submitButton.attr('disabled', 'disabled').addClass('btn-disabled');
                submitButton.parents('form:first').submit();
            });

            $(function () {
                $('#id_list_date_start').datetimepicker({
                    sideBySide: true,
                });
            });
            $(function () {
                $('#id_list_date_end').datetimepicker({
                    sideBySide: true,
                });
            });

            $(function() {
                // bootstrap WYSIHTML5 - text editor
                $(".textarea").wysihtml5();
            });
        });
    </script>
{% endblock scripts %}
