{% extends "base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block title %}KnobLinx / Account Registration{% endblock title %}

{% block content %}
    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left"><h3>Account Registration</h3></div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <form action="." method="POST" enctype="multipart/form-data" role="form">
                    {% csrf_token %}
                    <div class="x_panel">
                        <div class="x_content">
                            <br/>
                            <div class="col-lg-9 col-md-9 col-sm-9">
                                <fieldset>
                                    <div class="row">
                                        <div class="form-group col-md-11 col-sm-11 col-xs-12 {% if form.profile_picture.errors %}has-error{% endif %}">
                                            <label for="{{ form.profile_picture.auto_id }}" class="control-label">
                                                {{ form.profile_picture.label }}
                                            </label>
                                            {{ form.profile_picture|add_class:"form-control" }}
                                            {{ form.profile_picture.errors }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-11 col-sm-11 col-xs-12 {% if form.video.errors %}has-error{% endif %}">
                                            <label for="{{ form.video.auto_id }}" class="control-label">
                                                {{ form.video.label }} <small style="color:#A9A8AE;">({{ form.video.help_text|safe }})</small>
                                            </label>
                                            {{ form.video|add_class:"form-control" }}
                                            {{ form.video.errors }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-11 col-sm-11 col-xs-12 {% if form.resume.errors %}has-error{% endif %}">
                                            <label for="{{ form.resume.auto_id }}" class="control-label">
                                                {{ form.resume.label }}
                                            </label>
                                            {{ form.resume|add_class:"form-control" }}
                                            {{ form.resume.errors }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-11 col-sm-11 col-xs-12 {% if form.gpa.errors %}has-error{% endif %}">
                                            <label for="{{ form.gpa.auto_id }}" class="control-label">
                                                {{ form.gpa.label }}
                                            </label>
                                            {{ form.gpa|add_class:"form-control" }}
                                            {{ form.gpa.errors }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-11 col-sm-11 col-xs-12 {% if form.university.errors %}has-error{% endif %}">
                                            <label for="{{ form.university.auto_id }}" class="control-label">
                                                {{ form.university.label }}
                                            </label>
                                            {{ form.university|add_class:"form-control" }}
                                            {{ form.university.errors }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-11 col-sm-11 col-xs-12 {% if form.degree.errors %}has-error{% endif %}">
                                            <label for="{{ form.degree.auto_id }}" class="control-label">
                                                {{ form.degree.label }}
                                            </label>
                                            {{ form.degree|add_class:"form-control" }}
                                            {{ form.degree.errors }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="control-group col-md-11 col-sm-11 col-xs-12">
                                            <label for="{{ form.skills.auto_id }}" class="control-label">
                                                {{ form.skills.label }}
                                            </label>
                                            <div class="col-md-12 col-sm-12 col-xs-12" style="padding-left:0px;">
                                                <input id="tags" type="text" class="tags form-control" name="skills" />
                                                <br>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" name="username" value="{{ user.username }}" />
                                    <input type="hidden" name="first_name" value="{{ user.first_name }}" />
                                    <input type="hidden" name="last_name" value="{{ user.last_name }}" />
                                    <input type="hidden" name="email" value="{{ user.email }}" />
                                    <input type="hidden" name="gender" value="{{ user.gender }}" />
                                </fieldset>
                                <div class="row">
                                    <div class="ln_solid"></div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-bottom:7em;">
                                        <button id="submitButton" type="submit" class="btn btn-primary btn-block active">Register</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}

{% block js %}
    <!-- jquery tags -->
    <script src="{% static 'vendors/jquery.tagsinput/src/jquery.tagsinput.js' %}"></script>
{% endblock js %}

{% block scripts %}
    <script type="text/javascript">
        $(document).ready(function() {
            // Toggle form submit content when clicked
            var submitButton = $('#submitButton');

            submitButton.on('click', function() {
                // disable the button to prevent multiple submissions
                submitButton.attr('disabled', 'disabled').addClass('btn-disabled');
                submitButton.parents('form:first').submit();
            });
        });
    </script>

    <!-- jQuery tags -->
    <script type="text/javascript">
        function onAddTag(tag) {
            // alert("Added a tag: " + tag);
        }
        function onRemoveTag(tag) {
            // alert("Removed a tag: " + tag);
        }
        function onChangeTag(tag) {
            // alert("Changed tag: " + tag);
        }
        $(document).ready(function() {
            $('#tags').tagsInput({
                width: 'auto',
                // 'autocomplete_url': url_to_autocomplete,
                'defaultText': 'add a skill',
                // 'onAddTag': onAddTag,
                // 'onRemoveTag': onRemoveTag,
                // 'onChange': onChangeTag,
                // 'delimiter': [','],   // Or a string with a single delimiter. Ex: ';'
                'removeWithBackspace': false,
                // 'minChars': 0,
                // 'maxChars' : 0, // if not provided there is no limit
                'placeholderColor': '#808282'
            });
            $('#tags').importTags('{% for skill in user.skills.split %}{{ skill }},{% endfor %}');
        });
    </script>
{% endblock scripts %}
